---
title: 'Using Prisma with PlanetScale'
metaTitle: 'Using Prisma with PlanetScale'
metaDescription: 'Guide to using Prisma with PlanetScale'
tocDepth: 2
toc: true
---

<TopBlock>

Prisma and PlanetScale together provide a development arena that optimizes rapid, type-safe development of data access applications, using Prisma's ORM and PlanetScale's highly scalable MySQL-based platform.

</TopBlock>

## About using Prisma with PlanetScale

This document discusses the concepts behind using Prisma and PlanetScale, explains the commonalities and differences between PlanetScale and other database providers, and leads you through the process for configuring your application to integrate with PlanetScale.

Benefits of PlanetScale include:

- **Enterprise scalability.** PlanetScale uses the [Vitess](https://vitess.io/) database clustering system to provide a highly scalable, MySQL-compatible database platform.

- **Database branches.** PlanetScale allows you to create [branches of your database schema](https://docs.planetscale.com/concepts/branching), so that you can test changes on a development branch before applying them to your production database.

- **Support for non-blocking schema changes.** PlanetScale provides a workflow that allows users to update database schemas without locking the database or causing downtime.

## Commonalities with other database providers

Many aspects of using Prisma with PlanetScale are just like using Prisma with any other database. You can still:

- model your database with the [Prisma Schema Language](/concepts/components/prisma-schema)
- use Prisma's existing [`mysql` database connector](/concepts/database-connectors/mysql) in your schema, along with the [connection string PlanetScale provides you](https://docs.planetscale.com/concepts/connection-strings)
- use [Introspection](/concepts/components/introspection) for existing projects if you already have a database schema in PlanetScale
- use [`db push`](/concepts/components/prisma-migrate/db-push) to push changes in your schema to the database
- use [Prisma Client](/concepts/components/prisma-client) in your application to talk to the database server at PlanetScale

## Differences to consider

There are important considerations to be aware of when working with PlanetScale, such as how to handle referential integrity, because PlanetScale does not enforce foreign key constraints.

### Referential integrity

PlanetScale is designed to be able to scale across multiple database servers. To support this, it [does not allow the use of foreign key constraints](https://docs.planetscale.com/tutorials/operating-without-foreign-keys), which are normally used in relational databases to enforce relationships between data in different tables.

To maintain these relationships in your data while using PlanetScale with Prisma, you will need to use Prisma's ability to [emulate referential integrity in the Prisma client](https://www.prisma.io/docs/concepts/components/prisma-schema/relations/referential-integrity#handling-the-referential-integrity-in-prisma).

Referential integrity is currently a Preview feature. To enable this, add it to the `previewFeatures` list in the `generator` block of `schema.prisma`, and set the `referentialIntegrity` type to `"prisma"` in the `datasource` block:

```prisma file=schema.prisma
datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

generator js {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}
```

### Branches and deploy requests

Planetscale provides two types of database branches: **development branches**, which allow you to test out schema changes, and **production branches**, which are protected from direct schema changes. Production branches are highly available and include automated daily backups. Once you are happy with the changes you make on a development branch, you can create a deploy request, which you can then review before deploying the changes to production.

When connecting to PlanetScale with Prisma, you will need to use the correct connection string for your branch. The connection URL for a given database branch can be found from your PlanetScale account by going to the overview page for the branch and selecting the 'Connect' dropdown. In the 'Passwords' section, generate a new password and select 'Prisma' from the dropdown to get the Prisma format for the connection URL.

See Prisma's [Getting Started guide](/getting-started/setup-prisma/start-from-scratch/relational-databases/connect-your-database-typescript-planetscale) for more details of how to connect to a PlanetScale database.

### Pushing schema changes with `db push`

- Recommend `prisma db push` instead of `prisma migrate`
  - TODO Reasoning

## Additional considerations

- Defining indices on foreign keys (@@index)
- using db push (migrate has no value)
- Use expand and contract for “breaking changes” (renames aren’t supported anyways)

  > **No schema changes on your production database**

  - _have_ to use branches and deploy requests when working with production branch

  > **No data copying between branches**

  - Migrate needs migration table to work
  - enable migration table copy in settings on PS

  -- defining an index on an implicit many-to-many relation... creating indices for relation scalars with referentialIntegrity set to Prisma (and the proposal: https://github.com/prisma/prisma/issues/10611)

## More on using with PlanetScale and Prisma

The fastest way to start using PlanetScale with Prisma is to refer to our Getting Started documentation:

- [Start from scratch](https://www.prisma.io/docs/getting-started/setup-prisma/start-from-scratch/relational-databases-typescript-planetscale)

- [Add to existing project](https://www.prisma.io/docs/getting-started/setup-prisma/add-to-existing-project/relational-databases-typescript-planetscale)

These tutorials will take you through the process of connecting to PlanetScale, pushing schema changes, and using the Prisma Client.

For further tips on best practices when using Prisma and PlanetScale together, watch our video:

<div class="videoWrapper">

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/iaHt5_hg44c"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>

</div>
