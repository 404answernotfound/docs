---
title: Squashing migration
metaDescription: How to squash multiple migrations (.sql files) into a single migration.
---

<TopBlock>

This topic describes how to squash multiple migrations (.sql files) into a single migration.

<Admonition type="info">
add any possible notes or warnings here....

</Admonition>

</TopBlock>

## About squashing migrations

CONCEPTS here
There are two common use cases for squashing multiple migrations (.sql files) into a single migration.

### Migrate cleanly from a development environment

In a busy development environment, whether one person or 20, you might want to push one single migrations.sql file to your production environment, and leave out some extraneous migrations left in the development environment.

Consider the following scenario:
Your team has a branch based workflow. A developer branches from `/main` and starts working on a feature branch. This includes generating multiple migrations using `migrate dev`. After the feature is finished, the migration history might contain unnecessary intermediate steps that are unwanted in the final migration history that will be pushed to `/main`. There could also be pressing reasons why the intermediate steps can not be applied in production (they might lose data or be extremely slow / disruptive). The user therefore wants to squash all their newly created local migrations into one migration, that does not include the undeeded, extraneous migrations.

For instructions to squash only the wanted migrationsinto a new, singlefile, refer to --anchor link to steps below--.

### Create a clean history in a production environment

The practice of using `migrate diff` is for minimizing number of migration files in your production so that anyone pulling from production gets a clean package.

## Important Considerations

any gotchas or requirements here

## Using migration squashing
